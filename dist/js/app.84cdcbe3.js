(function(e){function t(t){for(var i,r,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0e90":function(e,t,n){},"106f":function(e,t,n){},"17f2":function(e,t,n){"use strict";var i=n("b030"),a=n.n(i);a.a},"258d":function(e,t,n){},"2af6":function(e,t,n){"use strict";var i=n("5a0c"),a=n.n(i);a.a},"32ff":function(e,t,n){"use strict";var i=n("4021"),a=n.n(i);a.a},"363e":function(e,t,n){},"3b35":function(e,t,n){},"3ed1":function(e,t,n){},4021:function(e,t,n){},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return n(t)}function s(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="4678"},4896:function(e,t,n){"use strict";var i=n("258d"),a=n.n(i);a.a},"504d":function(e,t,n){},5056:function(e,t,n){},5474:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("div",[n("el-menu",{staticClass:"el-menu-demo flex",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("div",{staticClass:"main-menu flex space-between"},[n("div",{staticClass:"flex"},[n("img",{staticClass:"img-app",attrs:{src:"/img/app/logo-50x50.png"}}),n("div",{staticClass:"hamburger",on:{click:e.doToggle}},[n("div",{staticClass:"span"}),n("div",{staticClass:"span"}),n("div",{staticClass:"span"})]),n("div",{ref:"nav",staticClass:"container-nav"},[n("router-link",{attrs:{to:"/"}},[n("el-menu-item",{attrs:{index:"1"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("Home")])],1),n("router-link",{attrs:{to:"/parking"}},[n("el-menu-item",{attrs:{index:"2"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("Find")])],1),n("router-link",{attrs:{to:"/parking/add"}},[n("el-menu-item",{attrs:{index:"3"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("add parking")])],1),e.loggedInUser._id?e._e():n("router-link",{attrs:{to:"/login"}},[n("el-menu-item",{attrs:{index:"4"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("Login")])],1),e.loggedInUser._id?n("router-link",{attrs:{to:"/user/"+e.loggedInUser._id}},[n("el-menu-item",{attrs:{index:"5"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("my parkings")])],1):e._e(),e.loggedInUser._id?n("div",{staticClass:"logout",on:{click:e.logout}},[n("el-menu-item",{attrs:{index:"6"},nativeOn:{click:function(t){return e.doToggle(t)}}},[e._v("Logout")])],1):e._e()],1)]),n("router-link",{staticClass:"btn-profile",attrs:{to:"/user/"+e.loggedInUser._id}},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.loggedInUser.firstName,expression:"loggedInUser.firstName"}],staticClass:"profile-icon"},[e._v(e._s(e.nameInitials))])])],1)])],1)]),n("router-view")],1)},s=[],r={data:function(){return{block:!0}},created:function(){this.$root.demoDummyNotify=!0},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},nameInitials:function(){return this.loggedInUser.firstName.charAt(0)+this.loggedInUser.lastName.charAt(0)}},methods:{doToggle:function(){this.$refs.nav.classList.toggle("active")},logout:function(){this.$store.commit({type:"logoutUser"}),localStorage.removeItem("loggedInUser"),this.$router.push("/login")}}},o=r,c=(n("5c0b"),n("2877")),l=Object(c["a"])(o,a,s,!1,null,null,null),u=l.exports,d=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"home flex column justify-content-c"},[n("div",{staticClass:"header"},[n("h2",[e._v("Parker - Your Parking Friend!")]),n("p",[e._v("Wasting too much time finding an available parking?\n        Parker helps you find one in just a few clicks!")]),n("P",{staticClass:"2nd-p"},[e._v("Simply set the preferred area, choose the parking that suits you, \n      and click RESERVE - the parking will be waiting for you!")]),n("router-link",{attrs:{to:"/parking"}},[n("el-button",{attrs:{type:"success"}},[e._v("Find me a Parking!")])],1)],1)])])},g=[],f={name:"home"},m=f,v=(n("7d61"),Object(c["a"])(m,p,g,!1,null,"45b6a1d1",null)),h=v.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],w={},y=Object(c["a"])(w,k,b,!1,null,null,null),_=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("ParkingList",{attrs:{parkings:e.parkings}})],1)},P=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!==e.pos?n("section",{staticClass:"parking-list"},[n("div",{staticClass:"container-search flex"}),n("button",{staticClass:"btn-map",on:{click:function(t){e.isMap=!e.isMap}}},[e._v(e._s(e.toggle))]),n("div",{staticClass:"container-list flex"},[n("div",{staticClass:"list list-h",class:{showMap:e.isMap}},[n("FilterBy"),n("Search",{staticStyle:{flex:"1"}}),n("ul",[e._l(e.parkings,function(e){return n("li",{key:e._id},[n("parkingPreview",{attrs:{parking:e}})],1)}),n("li",[0===e.parkings.length?n("h5",[e._v("There are no parking spaces at the moment - please try later")]):e._e()])],2)],1),e.pos?n("GmapMap",{staticStyle:{width:"60%",height:"100vh",flex:"1"},attrs:{center:e.pos,zoom:14,"map-type-id":"terrain"}},[e._l(e.parkings,function(t,i){return n("GmapMarker",{key:i,attrs:{position:t.location,icon:t.iconUrl,clickable:!0,label:{text:"₪"+t.price,color:"white",fontSize:"16px"},draggable:!1},on:{click:function(n){e.$router.push("/parking/"+t._id)}}})}),n("GmapMarker",{attrs:{position:e.pos,icon:e.iconBase}})],2):e._e()],1),n("FooterCmp")],1):e._e()},C=[],I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},U=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer-app"},[n("div",{staticClass:"footer flex space-around align-center"},[n("ul",{staticClass:"flex"},[n("li",[e._v("Privacy policy")]),n("li",[e._v("Terms of Use")]),n("li",[e._v("Legal Notice")]),n("li",[e._v("Accessibillity View")])]),n("div",[e._v("\n    Copyright © 2018 by Parker. All rights reserved\n  ")])])])}],$={},D=$,T=(n("9162"),Object(c["a"])(D,I,U,!1,null,"6e711c7d",null)),O=T.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{staticClass:"text-decoration",attrs:{to:"parking/"+e.parking._id}},[n("section",{staticClass:"section-parking-preview"},[n("el-card",{staticClass:"box-card",class:{occupied:e.isOccupied}},[n("div",{staticClass:"parking-box flex"},[n("img",{staticClass:"img-parking mr",attrs:{src:e.parking.imageURL,alt:"parking"}}),n("div",{staticClass:"parking-box-details flex column space-between"},[n("div",{staticClass:"flex space-between"},[n("h5",[e._v(e._s(e.parking.address))]),n("p",[e._v(e._s(e.parking.price)+"₪")])]),n("p",{staticClass:"flex distance"},[e._v(e._s(e.distance)+" ")]),n("div",{staticClass:"amenities flex"},[e.parking.amenities.isPaved?n("p",[n("i",{staticClass:"fas fa-road"})]):e._e(),e.parking.amenities.isForDisable?n("p",[n("i",{staticClass:"fas fa-wheelchair"})]):e._e(),e.parking.amenities.isCovered?n("p",[n("i",{staticClass:"fas fa-parking"})]):e._e()]),n("div",{staticClass:"container-btns",staticStyle:{display:"flex"}},[n("el-button",{attrs:{type:"info"}},[e._v("Details")]),e.isOccupied?e._e():n("el-button",{attrs:{type:"success",disabled:e.isOccupied},on:{click:function(t){t.preventDefault(),e.$router.push("/reserve/"+e.parking._id)}}},[e._v("\n                           Reserve\n                   ")])],1)])])])],1)])},M=[],A={computed:{isOccupied:function(){return this.parking.occupiedUntil>Date.now()},distance:function(){var e=this.parking.distance;return e>1?e.toFixed(2)+" km from you":1e3*e.toFixed(3)+" meters from you"}},props:{parking:Object}},E=A,L=(n("9dea"),Object(c["a"])(E,N,M,!1,null,"3fb0bcc4",null)),F=L.exports,B=n("bc3a"),S=n.n(B),z="AIzaSyC6AifY9XewU3b2wEp0Dr7XKyOjSS1oebQ";function R(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})}function G(e,t){return console.log("origin: ",e),console.log("destination: ",t),S.a.get("https://maps.googleapis.com/maps/api/directions/json?origin=".concat(e,"&destination=").concat(t,"&key=").concat(z)).then(function(e){return console.log("results: ",e),e.data})}function q(e){new google.maps.DirectionsService;var t=new google.maps.DirectionsRenderer,n={zoom:15,center:e},i=new google.maps.Map(document.getElementById("map"),n);t.setMap(i)}function K(e,t){}function V(e,t,n,i){var a=6371,s=H(n-e),r=H(i-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(H(e))*Math.cos(H(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=a*c;return l}function H(e){return e*(Math.PI/180)}var J={getPosition:R,getDirections:G,calcRoute:K,initMap:q,getDistanceFromLatLonInKm:V},Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"flex"},[n("input",{ref:"input",staticClass:"input-location el-input__inner",attrs:{id:"pac-input",type:"text",placeholder:"Enter a location"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}}})])])},X=[],Y=(n("96cf"),n("3040"));function W(e,t){localStorage[e]=JSON.stringify(t)}function Z(e){var t=localStorage[e]||"null";return JSON.parse(t)}var ee={store:W,load:Z},te={data:function(){return{loc:{}}},mounted:function(){var e=Object(Y["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$gmapApiPromiseLazy();case 2:t=e.sent,n=this.$refs.input,new t.maps.places.Autocomplete(n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{search:function(){var e=this,t=new google.maps.Geocoder,n=this.$refs.input.value;t.geocode({address:n},function(t,n){n===google.maps.GeocoderStatus.OK?(e.loc.lat=t[0].geometry.location.lat(),e.loc.lng=t[0].geometry.location.lng(),e.$store.commit("setPosition",e.loc),e.$store.dispatch({type:"loadParkings"})):alert("Geocode was not successful for the following reason: "+n)})}}},ne=te,ie=(n("4896"),Object(c["a"])(ne,Q,X,!1,null,"4e90ceea",null)),ae=ie.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"filter"},[n("div",{staticClass:"filter-by",on:{click:e.toggleFilter}},[n("i",{staticClass:"fas fa-filter"}),e._v("Filter\n        "),n("p",{staticClass:"clear-filter-btn",on:{click:function(t){return t.stopPropagation(),e.clearFilter(t)}}},[e._v("clear")])]),e.isOpen?n("div",{staticClass:"filter-container"},[n("div",{staticClass:"filter-options flex column"},[n("p",[e._v("Distance in km:")]),n("el-slider",{attrs:{"show-input":""},model:{value:e.filterBy.distance,callback:function(t){e.$set(e.filterBy,"distance",t)},expression:"filterBy.distance"}}),n("el-checkbox",{model:{value:e.filterBy.isPaved,callback:function(t){e.$set(e.filterBy,"isPaved",t)},expression:"filterBy.isPaved"}},[e._v("paved")]),n("el-checkbox",{model:{value:e.filterBy.isForDisable,callback:function(t){e.$set(e.filterBy,"isForDisable",t)},expression:"filterBy.isForDisable"}},[e._v("for disabled")]),n("el-checkbox",{model:{value:e.filterBy.isCovered,callback:function(t){e.$set(e.filterBy,"isCovered",t)},expression:"filterBy.isCovered"}},[e._v("covered")]),n("el-checkbox",{model:{value:e.filterBy.isAvailable,callback:function(t){e.$set(e.filterBy,"isAvailable",t)},expression:"filterBy.isAvailable"}},[e._v("available")]),n("el-button",{attrs:{type:"success"},on:{click:e.filter}},[e._v("Done")])],1)]):e._e()])},re=[],oe={data:function(){return{filterBy:{isPaved:!1,isForDisable:!1,isCovered:!1,distance:100,isAvailable:!1},isOpen:!1}},methods:{filter:function(){console.log("filtering..."),this.$store.commit({type:"updateFilter",filterBy:this.filterBy}),console.log("filter updated!"),this.isOpen=!1},toggleFilter:function(){this.isOpen=!this.isOpen},clearFilter:function(){this.filterBy.isPaved=!1,this.filterBy.isForDisable=!1,this.filterBy.isCovered=!1,this.filterBy.distance=100,this.filterBy.isAvailable=!1}}},ce=oe,le=(n("599f"),Object(c["a"])(ce,se,re,!1,null,"7e3b996c",null)),ue=le.exports,de={data:function(){return{pos:null,iconBase:"img/my-position-64x64.png",isMap:!1,msg:""}},props:{parkings:Array},methods:{getMyPos:function(){return J.getPosition().then(function(e){var t=e.coords.latitude,n=e.coords.longitude;return{lat:t,lng:n}})}},created:function(){var e=this;this.getMyPos().then(function(t){e.pos=t})},computed:{toggle:function(){return this.isMap?"List":"Map"}},components:{ParkingPreview:F,Search:ae,FilterBy:ue,FooterCmp:O}},pe=de,ge=(n("94d0"),Object(c["a"])(pe,x,C,!1,null,"4f4c2042",null)),fe=ge.exports,me=n("5c96"),ve=n.n(me),he="/parking";function ke(){var e={location:{lat:32.088,lng:34.801},address:"Anne Frank 16, Ramat Gan",occupiedUntil:0,reserverId:"",ownerId:"5b583081f6d632e56ebd6a45",price:18,amenities:{isCovered:!0,isPaved:!0,isForDisable:!1},description:"A covered parking 2 minutes walking from the Bursa area in Ramat Gan. Low rates, optional full day renting.",createdAt:Date.now(),iconUrl:"/img/available-position-48x48.png",imageURL:"https://geo3.ggpht.com/maps/photothumb/fd/v1?bpb=ChAKDnNlYXJjaC5UQUNUSUxFEmUKNwm3urAoxEsdFRHphEl1w6dxThojCxDThbhCGhoSGAoUChIJt7qwKMRLHRURU3v3Q1x0N8MQEAwSCg2ibiATFWCkvhQaEgmdOFVqxEsdFRHdQklRXTc45SoKDYNrIBMVPKC-FBoGCMgBEJgD&gl=IL"};return S.a.post(he+"/add",e)}function be(){setTimeout(we,3e3)}function we(){return new ve.a({title:"we have great news for you!",message:"a new parking was just released!",type:"info",duration:0})}var ye,_e={showNewParking:be,addRandomParking:ke},je={methods:{showNewParking:function(){setTimeout(this.showNewParkingNotification,12e4)},showNewParkingNotification:function(){this.$notify({title:"We have great news for you!",message:"a new parking - at Anne Frank 16, Ramat Gan - was just added to the list!             Be the first to rent it",type:"success",duration:8e3})},showAvailableParking:function(){setTimeout(this.showAvailableParkingMsg,6e4)},showAvailableParkingMsg:function(){var e=this;_e.addRandomParking().then(function(t){var n=t.data;e.$store.commit({type:"addNewParking",parkingToAdd:n}),e.$notify({title:"it's your lucky day!",message:"a new parking near your location has just become available!                     reserve it before it is occupied again",type:"success",duration:8e3})})}},created:function(){this.$store.dispatch({type:"loadParkings"}),this.$root.demoDummyNotify&&(this.showNewParking(),this.showAvailableParking(),this.$root.demoDummyNotify=!1)},computed:{parkings:function(){return this.$store.getters.parkingToDisplay}},components:{ParkingList:fe}},Pe=je,xe=(n("17f2"),Object(c["a"])(Pe,j,P,!1,null,null,null)),Ce=xe.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.parkingDetail?n("section",[n("div",{staticClass:"section-details flex"},[n("el-card",{staticClass:"box-card"},[n("el-button",{staticStyle:{display:"flex"},attrs:{type:"info",plain:""},nativeOn:{click:function(t){e.$router.push("/parking")}}},[e._v("Back")]),n("h3",{staticClass:"address"},[e._v(e._s(e.parkingDetail.parking.address))]),n("img",{staticClass:"parking-details-image image",attrs:{src:e.parkingDetail.parking.imageURL}}),n("div",[n("div",{staticClass:"parking-details column"},[n("h5",{staticClass:"to-know"},[e._v("things you should know:")]),n("p",[n("i",{staticClass:"fas fa-shekel-sign"}),e._v(" "+e._s(e.parkingDetail.parking.price))]),n("p",[n("i",{staticClass:"fas fa-map-marker-alt"}),e._v("  "+e._s(e.calcDistance)+" ")]),n("div",{staticClass:"line"}),n("p",[e._v(e._s(e.parkingDetail.parking.description))]),n("div",{staticClass:"line"}),n("div",{staticClass:"amenities flex"},[e.parkingDetail.parking.amenities.isPaved?n("p",[n("i",{staticClass:"fas fa-road"})]):e._e(),e.parkingDetail.parking.amenities.isForDisable?n("p",[n("i",{staticClass:"fas fa-wheelchair"})]):e._e(),e.parkingDetail.parking.amenities.isCovered?n("p",[n("i",{staticClass:"fas fa-parking"})]):e._e()])]),n("div",{staticClass:"line"}),n("div",{staticClass:"about-owner flex column space-between"},[n("h5",[e._v("Owner details")]),n("p",[e._v(e._s(e.parkingDetail.owner.firstName)+" "+e._s(e.parkingDetail.owner.lastName))]),n("p",[e._v(e._s(e.parkingDetail.owner.email))]),n("div",[n("el-button",{staticClass:"btn-reserve",attrs:{type:"success",disabled:e.isOccupied},on:{click:function(t){e.$router.push("/reserve/"+e.parkingDetail.parking._id)}}},[e._v("Reserve Now!")])],1)])])],1),n("GmapMap",{staticStyle:{flex:"1"},attrs:{center:e.parkingDetail.parking.location,zoom:16,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parkingDetail.parking.location,clickable:!0,draggable:!1,icon:e.parkingDetail.parking.iconUrl},on:{click:function(t){e.$router.push("/reserve/"+e.parkingDetail.parking._id)}}})],1)],1)]):e._e()},Ue=[],$e=(n("ac6a"),n("9393")),De=n("a322"),Te="/parking";function Oe(e){var t=e.lat,n=e.lng;return S.a.get(Te+"?lat=".concat(t,"&lng=").concat(n)).then(function(e){return e.data})}function Ne(e){return S.a.get("".concat(Te,"/").concat(e)).then(function(e){return e.data})}function Me(e){return S.a.post(Te+"/add",e)}function Ae(e){return S.a.put("".concat(Te,"/reserve/").concat(e.parkingId),e).then(function(e){return e.data})}function Ee(e){return S.a.put("".concat(Te,"/stop"),e).then(function(e){return e.data})}var Le=(ye={query:Oe,getById:Ne,reserveParking:Ae,stopParking:Ee},Object(De["a"])(ye,"reserveParking",Ae),Object(De["a"])(ye,"addParking",Me),ye),Fe={data:function(){return{parkingDetail:null,lat:0,lng:0,markers:[],distance:0}},methods:{loadParkingId:function(){var e=this,t=this.$route.params.id;return Le.getById(t).then(function(t){e.parkingDetail=t,console.log("parking icon: ",e.parkingDetail.parking.iconUrl)})},getDistanceFromLatLonInKm:function(e,t,n,i){var a=6371,s=this.deg2rad(n-e),r=this.deg2rad(i-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=a*c;return l},deg2rad:function(e){return e*(Math.PI/180)}},created:function(){var e=Object(Y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.loadParkingId(),n=J.getPosition().then(function(e){var t=e.coords.latitude,n=e.coords.longitude;return{lat:t,lng:n}}),e.next=4,Promise.all([t,n]);case 4:i=e.sent,a=Object($e["a"])(i,2),a[0],s=a[1],this.distance=this.getDistanceFromLatLonInKm(this.parkingDetail.parking.location.lat,this.parkingDetail.parking.location.lng,s.lat,s.lng);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{isOccupied:function(){return this.parkingDetail.parking.occupiedUntil>Date.now()},calcDistance:function(){return this.distance>1?this.distance.toFixed(2)+" km from you":1e3*this.distance.toFixed(3)+" meters from you"}}},Be=Fe,Se=(n("2af6"),Object(c["a"])(Be,Ie,Ue,!1,null,"6a24f6c2",null)),ze=Se.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"reserve-parking"},[n("h2",[e._v(e._s(e.parking.address))]),n("GmapMap",{staticStyle:{height:"300px"},attrs:{center:e.parking.location,zoom:17,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parking.location,clickable:!0,draggable:!0,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"},on:{click:function(t){e.center=e.m.position}}})],1),n("div",{staticClass:"reserve-details"},[n("p",[e._v("How many hours?")]),n("form",{attrs:{submit:"setParkingDuration"}},[n("el-input-number",{attrs:{min:1,max:10},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),n("p",{staticClass:"price"},[e._v("Total Price: ₪ "+e._s(e.cost))]),n("el-button",{attrs:{type:"success"},on:{click:function(t){e.reserveParking(e.parking)}}},[e._v("Reserve Parking!")])],1)])],1)},Ge=[],qe=(new i["default"],{data:function(){return{hours:1,parking:{location:{lat:0,lng:0}}}},created:function(){this.loadParking(),this.loadHours()},methods:{reserveParking:function(e){var t=this;if(this.user._id){var n=Date.now()+60*this.hours*60*1e3;e.reserverId=this.user._id,e.occupiedUntil=n,e.iconUrl="/img/occupied-48x48.png",this.$store.dispatch({type:"reserveParking",parking:e}).then(function(n){t.showConfirmation(),t.$router.push("/navigate/".concat(e._id)),localStorage.removeItem("parking-duration")})}else ee.store("parking-duration",this.hours),this.$router.push("/login")},loadParking:function(){var e=this,t=this.$route.params.id;Le.getById(t).then(function(t){e.parking=t.parking})},showConfirmation:function(){this.$message({message:"Congratulations "+this.user.firstName+", your parking at "+this.parking.address+" is waiting for you!",type:"success",duration:2e3})},loadHours:function(){var e=ee.load("parking-duration");e&&(this.hours=e)}},computed:{cost:function(){return this.hours*this.parking.price},user:function(){return this.$store.getters.loggedInUser}}}),Ke=qe,Ve=(n("81de"),Object(c["a"])(Ke,Re,Ge,!1,null,null,null)),He=Ve.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Reserved Parkings"}},[n("h2",{directives:[{name:"show",rawName:"v-show",value:!e.reserved,expression:"!reserved"}]},[e._v("You haven't reserved any parking yet.")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.reserved,expression:"reserved"}],staticClass:"reserved-parkings"},[e.reservedParkings.length>0?n("h2",[e._v("My Reserved Parkings:")]):e._e(),n("ul",e._l(e.reservedParkings,function(t){return n("my-parking-preview",{key:t._id,attrs:{parking:t,owned:!1},on:{"stop-parking":function(n){e.stopParking(t)}}})}))])]),n("el-tab-pane",{attrs:{label:"Owned Parkings"}},[n("div",{staticClass:"owned-parkings"},[n("h2",[e._v("My Owned Parkings")]),n("ul",e._l(e.ownedParkings,function(e){return n("my-parking-preview",{key:e._id,attrs:{parking:e,owned:!0}})}))])]),n("el-tab-pane",{attrs:{label:"Profile"}},[n("div",{staticClass:"my-details"},[n("h2",[e._v("My Details")]),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"profile-details flex space-around"},[n("img",{staticClass:"profile-image",attrs:{src:e.user.profileImage}}),n("div",{staticClass:"profile-details flex column"},[n("h2",[e._v(e._s(e.user.firstName)+" "+e._s(e.user.lastName))]),n("p",[e._v(e._s(e.user.email))])])])])],1)])],1)],1):e._e()},Qe=[],Xe="/user";function Ye(e){return S.a.get("".concat(Xe,"/").concat(e)).then(function(e){return e.data})}function We(e){return S.a.post("".concat(Xe,"/checkLogin"),e).then(function(e){return e.data})}function Ze(e){return S.a.post("".concat(Xe,"/add"),e).then(function(e){return e.data})}var et={getUserById:Ye,login:We,addUser:Ze},tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("router-link",{staticClass:"no-underline",attrs:{to:"/parking/"+e.parking._id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"my-parkings-container flex space-between"},[n("div",{staticClass:"image-container"},[n("img",{attrs:{src:e.parking.imageURL}}),n("div",{staticClass:"google-maps",class:{"hidden-map":!e.mapView}},[n("GmapMap",{staticStyle:{width:"100%",height:"100%"},attrs:{center:e.parking.location,zoom:15,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parking.location,clickable:!0,draggable:!1},on:{click:function(t){t.preventDefault(),e.center=e.m.position}}})],1)],1),n("div",{staticClass:"toggle-map-btn",on:{click:function(t){t.preventDefault(),e.mapView=!e.mapView}}})]),n("div",{staticClass:"details-container parking-properties flex column space-between"},[n("ul",{staticClass:"parking-details"},[n("li",[n("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(e.parking.address))]),n("li",[n("i",{staticClass:"fas fa-shekel-sign"}),e._v(" "+e._s(e.parking.price)+" per hour")]),e.owned?n("li",[e._v(e._s(e.parking.reserverId?"Occupied":"Available for rent"))]):n("li",[n("i",{staticClass:"far fa-clock"}),e._v("  ends "+e._s(e.convertTimestamp(e.parking.occupiedUntil)))])]),e.owned?e._e():n("el-button",{attrs:{type:"success"},on:{click:function(t){t.preventDefault(),e.stopParking(e.parking)}}},[e._v("Stop Parking")])],1)])])],1)],1)},nt=[],it=n("c1df"),at=n.n(it),st={name:"my-parking-preview",props:["parking","owned"],data:function(){return{mapView:!1}},methods:{convertTimestamp:function(e){return at()(e).fromNow()},stopParking:function(){this.$emit("stop-parking",this.parking)}},created:function(){}},rt=st,ot=(n("bc88"),Object(c["a"])(rt,tt,nt,!1,null,"4d1e202e",null)),ct=ot.exports,lt={data:function(){return{user:null,reservedParkings:null,ownedParkings:null}},methods:{loadParkingsActivity:function(){var e=this;console.log("route params userId: ",this.$route.params.userId);var t=this.$route.params.userId;console.log("userID: ",t),et.getUserById(t).then(function(t){e.user=t.user,e.reservedParkings=t.reservedParkings,e.ownedParkings=t.ownedParkings,console.log("my owned parkings: ",e.ownedParkings)})},convertTimestamp:function(e){return at()(e).fromNow()},stopParking:function(e){var t=this;return console.log("parking to stop: ",e),this.$store.dispatch({type:"stopParking",parking:e}).then(function(){t.reservedParkings=t.reservedParkings.filter(function(t){return t._id!==e._id})})}},created:function(){this.loadParkingsActivity()},computed:{reserved:function(){return console.log("my reserved parkings: ",this.reservedParkings),this.reservedParkings.length>0}},components:{myParkingPreview:ct}},ut=lt,dt=(n("7ec3"),Object(c["a"])(ut,Je,Qe,!1,null,"52a71533",null)),pt=dt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Login"}},[n("div",{staticClass:"login"},[n("h3",[e._v("Login to your account")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("div",{staticClass:"login-container flex column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"}],attrs:{type:"email",required:"",placeholder:"Insert your email"},domProps:{value:e.userInfo.email},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"email",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.password,expression:"userInfo.password"}],attrs:{type:"password",required:"",placeholder:"password"},domProps:{value:e.userInfo.password},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"password",t.target.value)}}}),n("input",{staticClass:"el-button el-button--success",attrs:{type:"submit"}})])])])]),n("el-tab-pane",{attrs:{label:"Signup"}},[n("div",{staticClass:"signup"},[n("h3",[e._v("Create a new account")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("div",{staticClass:"signup-container flex column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.firstName,expression:"newUser.firstName"}],attrs:{type:"text",required:"",placeholder:"First Name:"},domProps:{value:e.newUser.firstName},on:{input:function(t){t.target.composing||e.$set(e.newUser,"firstName",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.lastName,expression:"newUser.lastName"}],attrs:{type:"text",required:"",placeholder:"Last Name:"},domProps:{value:e.newUser.lastName},on:{input:function(t){t.target.composing||e.$set(e.newUser,"lastName",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{type:"email",required:"",placeholder:"email:"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{type:"password",required:"",placeholder:"Password:"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),n("label",{staticClass:"upload-img-lbl el-button el-button--primary",attrs:{for:"loadProfileImg"}},[e._v(e._s(e.loadImgText))]),n("input",{staticClass:"load-img-btn",attrs:{type:"file",id:"loadProfileImg",name:"profile-image"},on:{change:function(t){e.loadImg(t.target,t)}}}),n("input",{staticClass:"submit-btn el-button el-button--success",attrs:{type:"submit"}})])])])])],1),n("FooterCmp")],1)},ft=[],mt="parker1";"https://api.cloudinary.com/v1_1/".concat(mt,"/image/upload");function vt(e,t){return ht.apply(this,arguments)}function ht(){return ht=Object(Y["a"])(regeneratorRuntime.mark(function e(t,n){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=function(e){return console.log("uploadedImg",e),console.log("uploadedImg",e.url),e},e.next=3,kt(t,i);case 3:return a=e.sent,console.log("res=",a.url),e.abrupt("return",a.url);case 6:case"end":return e.stop()}},e,this)})),ht.apply(this,arguments)}function kt(e,t){var n="https://api.cloudinary.com/v1_1/".concat(mt,"/image/upload"),i=new FormData;return i.append("file",e.files[0]),i.append("upload_preset","ymaycqwv"),fetch(n,{method:"POST",body:i}).then(function(e){return e.json()}).then(t).catch(function(e){console.error(e)})}var bt={uploadImg:vt},wt={data:function(){return{message:"",userInfo:{email:"",password:""},newUser:{firstName:"",lastName:"",email:"",password:"",profileImage:""},loadImgText:"Load Image"}},methods:{login:function(){var e=this;this.userInfo.email&&this.userInfo.password?this.$store.dispatch({type:"login",userInfo:this.userInfo}).then(function(t){e.$router.go(-1)}).catch(function(t){e.alert("The User or Password is wrong! please try again")}):this.alert("The User or Password is empty! Plaese insert and try again")},signup:function(){var e=this;console.log("user signed up"),this.newUser.firstName&&this.newUser.lastName&&this.newUser.email&&this.newUser.password?this.$store.dispatch({type:"signup",newUser:this.newUser}).then(function(t){e.$router.push("/parking")}).catch(function(e){console.log("error creating new user: ",e)}):this.message="Please insert all details"},alert:function(e){this.$alert(e,"Alert",{confirmButtonText:"OK"})},loadImg:function(e,t){var n=this;console.log("elPic: ",e),console.log("event: ",t),bt.uploadImg(e,t).then(function(e){console.log("img url res: ",e),n.newUser.profileImage=e,n.loadImgText="image uploaded"})}},components:{FooterCmp:O}},yt=wt,_t=(n("81d8"),Object(c["a"])(yt,gt,ft,!1,null,"a98cc008",null)),jt=_t.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"parking-section"},[n("form",{staticClass:"add-parking-form",on:{submit:function(t){return t.preventDefault(),e.addParking(t)}}},[n("h3",[e._v(" Add New Parking ")]),e.isAddParking?n("div",{staticClass:"add-parking"},[n("div",{staticClass:"add-margin"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.parkingToEdit.address,expression:"parkingToEdit.address"}],ref:"placeAutocomplete",staticClass:"el-input__inner",attrs:{placeholder:"Please input Address",type:"text"},domProps:{value:e.parkingToEdit.address},on:{input:function(t){t.target.composing||e.$set(e.parkingToEdit,"address",t.target.value)}}})]),n("div",[n("p",[e._v("Price in ₪:")]),n("el-input-number",{attrs:{min:1},model:{value:e.parkingToEdit.price,callback:function(t){e.$set(e.parkingToEdit,"price",t)},expression:"parkingToEdit.price"}})],1),n("div",{staticClass:"amenities-section add-margin"},[n("div",[n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isCovered,callback:function(t){e.$set(e.parkingToEdit.amenities,"isCovered",t)},expression:"parkingToEdit.amenities.isCovered"}},[e._v("Covered")])],1),n("div",[n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isPaved,callback:function(t){e.$set(e.parkingToEdit.amenities,"isPaved",t)},expression:"parkingToEdit.amenities.isPaved"}},[e._v("Paved")])],1),n("div",[n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isForDisable,callback:function(t){e.$set(e.parkingToEdit.amenities,"isForDisable",t)},expression:"parkingToEdit.amenities.isForDisable"}},[e._v("For disabled")])],1)]),n("div",{staticClass:"flex align-center"},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Please insert a description"},model:{value:e.parkingToEdit.description,callback:function(t){e.$set(e.parkingToEdit,"description",t)},expression:"parkingToEdit.description"}})],1),n("div",[n("input",{staticClass:"load-img-btn",attrs:{type:"file",id:"LoadImageBtn",name:"img"},on:{change:function(t){e.loadImg(t.target,t)}}}),n("label",{staticClass:"load-img-lbl el-button el-button--primary el-button--small",attrs:{for:"LoadImageBtn"}},[e._v(e._s(e.fileLabelTxt))])]),n("el-button",{attrs:{type:"success"},on:{click:e.addParking}},[e._v("Confirm New Parking")])],1):e._e()]),n("FooterCmp")],1)},xt=[],Ct=(n("28a5"),{props:["parking"],name:"ParkingEdit",data:function(){return{parkingToAdd:{location:{lat:"0",lng:"0"},address:"",occupiedUntil:"0",iconUrl:"/img/available-position-48x48.png",reserverId:"",ownerId:"",price:"0",amenities:{isCovered:!1,isPaved:!0,isForDisable:!1},description:"",createdAt:0,imageURL:"http://res.cloudinary.com/parker1/image/upload/v1533190733/e8iuj1et9h7mwylwhe5x.jpg"},isAddParking:!0,fileLabelTxt:"Load Image"}},components:{FooterCmp:O},computed:{parkingToEdit:function(){return this.parkingToAdd},user:function(){return this.$store.getters.loggedInUser}},created:function(){this.reLoadParkingToAdd()},mounted:function(){var e=this;console.log("gmap promise lazy: ",this.$gmapApiPromiseLazy()),this.$gmapApiPromiseLazy().then(function(t){var n=new t.maps.places.Autocomplete(e.$refs.placeAutocomplete);n.addListener("place_changed",function(t){var i=n.getPlace();e.parkingToAdd.location.lat=i.geometry.location.lat(),e.parkingToAdd.location.lng=i.geometry.location.lng(),e.parkingToAdd.address=i.formatted_address})})},methods:{addParking:function(){var e=this;if(this.user._id)if(this.parkingToAdd.address){var t=this.parkingToEdit;this.isAddParking&&(t.ownerId=this.user._id,this.$store.dispatch({type:"addParking",newParking:t}).then(function(t){e.$router.push("/parking/".concat(t._id)),localStorage.removeItem("parking-to-add")}).catch(function(t){e.alert("Failed to save parking, please try later")}))}else this.alert("The address is empty, please add address");else ee.store("parking-to-add",this.parkingToEdit),this.$router.push("/login")},reLoadParkingToAdd:function(){var e=ee.load("parking-to-add");e&&(this.parkingToAdd=e)},alert:function(e){this.$alert(e,"Alert",{confirmButtonText:"OK"})},loadImg:function(e,t){var n=this;bt.uploadImg(e,t).then(function(e){console.log("img url res: ",e),n.parkingToEdit.imageURL=e}),this.fileLabelTxt=t.target.value.split("\\").pop(),this.fileLabelTxt||(this.fileLabelTxt="Load Image")}}}),It=Ct,Ut=(n("32ff"),Object(c["a"])(It,Pt,xt,!1,null,"52a06bdc",null)),$t=Ut.exports,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("GmapMap",{ref:"navigateMap",staticStyle:{height:"300px"},attrs:{center:e.parking.location,zoom:11,"map-type-id":"terrain"}}),i("div",{staticClass:"navigation flex space-between"},[i("img",{attrs:{src:n("cc8b")},on:{click:e.navigate}}),i("el-button",{attrs:{type:"success"},on:{click:e.toggleDirections}},[e._v(e._s(e.directions.show?"Hide":"Show")+" Directions")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.directions.show,expression:"directions.show"}],ref:"panel",staticClass:"panel"})],1)},Tt=[],Ot=n("755e"),Nt={data:function(){return{userLocation:{location:{lat:0,lng:0}},parking:{location:{lat:0,lng:0}},directions:{distance:"",time:"",show:!1,url:""},icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}},mounted:function(){var e=Object(Y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.loadParking(),this.getUserLocation()]);case 2:return e.next=4,this.$gmapApiPromiseLazy();case 4:t=e.sent,console.log(t),n=new this.google.maps.DirectionsService,i=new this.google.maps.DirectionsRenderer,new t.maps.LatLng(this.userLocation.location.lat,this.userLocation.location.lng),a=this.$refs.navigateMap.$mapObject,console.log("map ref: ",this.$refs.navigateMap),s=this.$refs.panel,i.setMap(a),i.setPanel(s),r={origin:this.userLocation.location,destination:this.parking.location,travelMode:"DRIVING"},n.route(r,function(e,t){"OK"===t&&i.setDirections(e)});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{loadParking:function(){var e=this,t=this.$route.params.id;return Le.getById(t).then(function(t){console.log("resresresres",t),e.parking=t.parking})},getUserLocation:function(){var e=this;return J.getPosition().then(function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e.userLocation.location=n}).catch(function(e){console.log("Something went wrong: ",e)})},navigate:function(){var e=+this.parking.location.lat,t=+this.parking.location.lng;window.open("https://waze.com/ul?ll=".concat(e,",").concat(t,"&navigate=yes"),"_blank")},toggleDirections:function(){this.directions.show=!this.directions.show}},computed:{google:Ot["gmapApi"]}},Mt=Nt,At=(n("95ad"),Object(c["a"])(Mt,Dt,Tt,!1,null,"5685719d",null)),Et=At.exports;i["default"].use(d["a"]);var Lt=new d["a"]({routes:[{path:"/",name:"home",component:h},{path:"/about",name:"about",component:_},{path:"/parking",name:"parking-page",component:Ce},{path:"/parking/add",name:"parking-add",component:$t},{path:"/parking/:id",name:"parking-details",component:ze},{path:"/reserve/:id",name:"reserve-parking",component:He},{path:"/user/:userId",name:"my-parkings",component:pt},{path:"/login",name:"login",component:jt},{path:"/navigate/:id",name:"navigate",component:Et}]}),Ft=n("2f62"),Bt=(n("20d6"),n("55dd"),{state:{parkings:[],position:{lat:0,lng:0},component:"ParkingFilter",latLng:{},isSearch:!1,filterBy:{distance:100,isPaved:"",isCovered:"",isForDisable:""}},getters:{parkingToDisplay:function(e){return e.parkings.filter(function(t){return!e.filterBy.isPaved||t.amenities.isPaved}).filter(function(t){return!e.filterBy.isCovered||t.amenities.isCovered}).filter(function(t){return!e.filterBy.isForDisable||t.amenities.isForDisable}).filter(function(t){var n=J.getDistanceFromLatLonInKm(e.position.lat,e.position.lng,t.location.lat,t.location.lng);return t.distance=n,n<e.filterBy.distance}).sort(function(e,t){return+e.distance>+t.distance?1:-1})},componentToShow:function(e){return e.component},p:function(e){return e.latLng},position:function(e){return e.position},search:function(e){return e.isSearch}},mutations:{setParkings:function(e,t){var n=t.parkings;e.parkings=n},reserveParking:function(e,t){var n=t.parking,i=e.parkings.findIndex(function(e){return e._id===n._id});e.parkings.splice(i,1,n)},stopParking:function(e,t){var n=t.parking,i=e.parkings.findIndex(function(e){return e._id===n._id});e.parkings.splice(i,1,n)},addParking:function(e,t){var n=t.newParking;e.parkings.unshift(n)},setPosition:function(e,t){e.position.lat=t.lat,e.position.lng=t.lng,e.latLng.lat=t.lat,e.latLng.lng=t.lng},updateFilter:function(e,t){var n=t.filterBy;e.filterBy=n},addNewParking:function(e,t){var n=t.parkingToAdd;e.parkings.push(n)}},actions:{loadParkings:function(e){return Le.query(e.getters.position).then(function(t){return e.commit({type:"setParkings",parkings:t}),t})},reserveParking:function(e,t){var n=t.parking;return Le.reserveParking(n).then(function(t){console.log("parking after returning from MDB: ",t),e.commit({type:"reserveParking",parking:t})})},stopParking:function(e,t){var n=t.parking;return n.occupiedUntil=0,n.reserverId="",n.iconUrl="/img/available-position-48x48.png",Le.stopParking(n).then(function(t){e.commit({type:"stopParking",parking:t})})},addParking:function(e,t){var n=t.newParking;return console.log("actions:",n),Le.addParking(n).then(function(t){return console.log("res in store: ",t),e.commit({type:"addParking",newParking:t.data}),t.data})}}}),St={state:{user:{_id:"",firstName:"",lastName:"",email:"",password:""}},getters:{isLoggedIn:function(e){return!!e.user._id},loggedInUser:function(e){return e.user}},mutations:{setUser:function(e,t){var n=t.user;e.user=n},logoutUser:function(e){e.user={_id:"",firstName:"",lastName:"",email:"",password:""}},addUser:function(e,t){var n=t.newUser;e.user=n}},actions:{login:function(e,t){var n=t.userInfo;return et.login(n).then(function(t){return t?(e.commit({type:"setUser",user:t}),ee.store("loggedInUser",t),t):Promise.reject(function(e){return e})}).catch(function(e){return Promise.reject()})},signup:function(e,t){var n=t.newUser;return et.addUser(n).then(function(t){e.commit({type:"addUser",newUser:t})})}}};i["default"].use(Ft["a"]);var zt=new Ft["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{ParkingModule:Bt,UserModule:St}}),Rt=(n("0fae"),n("9483"));Object(Rt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("3ed1"),n("4b3c");i["default"].use(Ot,{load:{key:"AIzaSyC6AifY9XewU3b2wEp0Dr7XKyOjSS1oebQ",libraries:"places"}}),i["default"].config.productionTip=!1,i["default"].use(ve.a),new i["default"]({router:Lt,store:zt,render:function(e){return e(u)},created:function(){var e=this,t=ee.load("loggedInUser");t&&this.$store.commit({type:"setUser",user:t}),J.getPosition().then(function(t){var n=t.coords;e.$store.commit({type:"setPosition",lat:n.latitude,lng:n.longitude})})}}).$mount("#app")},"599f":function(e,t,n){"use strict";var i=n("504d"),a=n.n(i);a.a},"5a0c":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var i=n("106f"),a=n.n(i);a.a},"72f0":function(e,t,n){},"7d61":function(e,t,n){"use strict";var i=n("8b94"),a=n.n(i);a.a},"7ec3":function(e,t,n){"use strict";var i=n("363e"),a=n.n(i);a.a},"81d8":function(e,t,n){"use strict";var i=n("5056"),a=n.n(i);a.a},"81de":function(e,t,n){"use strict";var i=n("72f0"),a=n.n(i);a.a},"8b94":function(e,t,n){},9162:function(e,t,n){"use strict";var i=n("c05e"),a=n.n(i);a.a},"94d0":function(e,t,n){"use strict";var i=n("3b35"),a=n.n(i);a.a},"95ad":function(e,t,n){"use strict";var i=n("5474"),a=n.n(i);a.a},"9dea":function(e,t,n){"use strict";var i=n("e2d2"),a=n.n(i);a.a},b030:function(e,t,n){},bc88:function(e,t,n){"use strict";var i=n("0e90"),a=n.n(i);a.a},c05e:function(e,t,n){},cc8b:function(e,t,n){e.exports=n.p+"img/waze.b7cdbe43.png"},e2d2:function(e,t,n){}});
//# sourceMappingURL=app.84cdcbe3.js.map