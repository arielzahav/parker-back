(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"106f":function(e,t,n){},"17f2":function(e,t,n){"use strict";var a=n("b030"),i=n.n(a);i.a},3242:function(e,t,n){},"3a7b":function(e,t,n){},"3ed1":function(e,t,n){},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return n(t)}function s(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("div",[n("el-menu",{staticClass:"el-menu-demo flex",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("div",{staticClass:"main-menu flex space-between"},[n("div",{staticClass:"flex"},[n("router-link",{attrs:{to:"/"}},[n("el-menu-item",{attrs:{index:"1"}},[e._v("Home")])],1),n("router-link",{attrs:{to:"/parking"}},[n("el-menu-item",{attrs:{index:"2"}},[e._v("Find")])],1),n("router-link",{attrs:{to:"/parking/add"}},[n("el-menu-item",{attrs:{index:"3"}},[e._v("add parking")])],1),e.loggedInUser._id?e._e():n("router-link",{attrs:{to:"/login"}},[n("el-menu-item",{attrs:{index:"4"}},[e._v("Login")])],1),e.loggedInUser._id?n("router-link",{attrs:{to:"/user/"+e.loggedInUser._id}},[n("el-menu-item",{attrs:{index:"5"}},[e._v("my parkings")])],1):e._e(),e.loggedInUser._id?n("div",{staticClass:"logout",on:{click:e.logout}},[n("el-menu-item",{attrs:{index:"6"}},[e._v("Logout")])],1):e._e()],1),n("router-link",{attrs:{to:"/user/"+e.loggedInUser._id}},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.loggedInUser.firstName,expression:"loggedInUser.firstName"}],staticClass:"profile-icon"},[e._v(e._s(e.nameInitials))])])],1)])],1)]),n("router-view"),n("FooterCmp")],1)},s=[],r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",[n("div",{staticClass:"footer-app flex space-around"},[n("ul",{staticClass:"footer-list-details flex"},[n("li",[n("a",{attrs:{href:"#"}},[e._v("About us")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("blog")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("Press")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("iOS App")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("Android App")])])]),n("ul",{staticClass:"footer-list-details flex"},[n("li",[n("a",{attrs:{href:"#"}},[e._v("F")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("I")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("B")])]),n("li",[n("a",{attrs:{href:"#"}},[e._v("T")])])])]),n("p",[e._v("Copyright Â© 2018 by Parker. All rights reserved.")])])}],c={},l=c,u=(n("b898"),n("2877")),d=Object(u["a"])(l,r,o,!1,null,"a492e8a0",null),p=d.exports,g={data:function(){return{}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},nameInitials:function(){return this.loggedInUser.firstName.charAt(0)+this.loggedInUser.lastName.charAt(0)}},methods:{logout:function(){this.$store.dispatch({type:"logout"}),localStorage.removeItem("loggedInUser"),this.$router.push("/login")}},components:{FooterCmp:p}},f=g,m=(n("5c0b"),Object(u["a"])(f,i,s,!1,null,null,null)),h=m.exports,v=n("8c4f"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"home flex column justify-content-c"},[n("div",{staticClass:"header"},[n("h2",[e._v("Parker - Your Parking Friend!")]),n("p",[e._v("Wasting too much time finding an available parking? Parker helps you find one in just a few clicks!")]),n("p",[e._v("Simply set the preferred area, choose the parking that suits you, \n      and click RESERVE - the parking will be waiting for you!")]),n("router-link",{attrs:{to:"/parking"}},[n("el-button",{attrs:{type:"success"}},[e._v("Find me a Parking!")])],1)],1)])])},b=[],y={data:function(){return{}},name:"home",components:{}},_=y,w=(n("d619"),Object(u["a"])(_,k,b,!1,null,"44953836",null)),j=w.exports,P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],C={},I=Object(u["a"])(C,P,x,!1,null,null,null),$=I.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("ParkingList",{attrs:{parkings:e.parkings}})],1)},U=[],M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!==e.pos?n("section",{staticClass:"parking-list"},[n("div",{staticClass:"container-search flex"}),n("button",{staticClass:"btn-map",on:{click:function(t){e.isMap=!e.isMap}}},[e._v("Map")]),n("div",{staticClass:"container-list flex"},[n("div",{staticClass:"list list-h",class:{showMap:e.isMap}},[n("FilterBy"),n("ParkingFilter",{staticStyle:{flex:"1"}}),n("ul",[e._l(e.parkings,function(e){return n("li",{key:e._id},[n("parkingPreview",{attrs:{parking:e}})],1)}),n("li",[0===e.parkings.length?n("h5",[e._v("There are no parking spaces currently try later")]):e._e()])],2)],1),e.pos?n("GmapMap",{staticStyle:{width:"60%",height:"100vh",flex:"1"},attrs:{center:e.pos,zoom:14,"map-type-id":"terrain"}},[e._l(e.parkings,function(t,a){return n("GmapMarker",{key:a,attrs:{position:t.location,icon:e.getSymbol(t),clickable:!0,draggable:!1},on:{click:function(n){e.$router.push("/parking/"+t._id)}}})}),n("GmapMarker",{attrs:{position:e.pos,icon:e.iconBase}})],2):e._e()],1)]):e._e()},O=[],L=(n("55dd"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{staticClass:"text-decoration",attrs:{to:"parking/"+e.parking._id}},[n("section",{staticClass:"section-parking-preview"},[n("el-card",{staticClass:"box-card",class:{occupied:e.isOccupied}},[n("div",{staticClass:"parking-box flex"},[n("img",{staticClass:"img-parking mr",attrs:{src:e.parking.imageURL,alt:"parking"}}),n("div",{staticClass:"parking-box-details flex column space-between"},[n("div",{staticClass:"flex space-between"},[n("h5",[e._v(e._s(e.parking.address))]),n("p",[e._v(e._s(e.parking.price)+"âª")])]),n("p",{staticClass:"flex distance"},[e._v(e._s(e.distance)+" km away")]),n("div",{staticClass:"amenities flex"},[e.parking.amenities.isPaved?n("p",[n("i",{staticClass:"fas fa-road"})]):e._e(),e.parking.amenities.isForDisable?n("p",[n("i",{staticClass:"fas fa-wheelchair"})]):e._e(),e.parking.amenities.isCovered?n("p",[n("i",{staticClass:"fas fa-parking"})]):e._e()]),n("div",{staticClass:"container-btns",staticStyle:{display:"flex"}},[n("el-button",{attrs:{type:"info"}},[e._v("Details")]),e.isOccupied?e._e():n("el-button",{attrs:{type:"success",disabled:e.isOccupied},on:{click:function(t){t.preventDefault(),e.$router.push("/reserve/"+e.parking._id)}}},[e._v("\n                           Reserve\n                   ")])],1)])])])],1)])}),E=[],T={computed:{isOccupied:function(){return this.parking.occupiedUntil>Date.now()},distance:function(){var e=this.parking.location.distance;return e}},methods:{onResrvedClick:function(){this.isOccupied||$router.push("/reserve/"+parking._id)}},props:{parking:Object}},B=T,A=(n("572b"),Object(u["a"])(B,L,E,!1,null,"a0dc904a",null)),N=A.exports,F=n("bc3a"),S=n.n(F),z="AIzaSyC6AifY9XewU3b2wEp0Dr7XKyOjSS1oebQ";function R(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})}function K(e,t){return console.log("origin: ",e),console.log("destination: ",t),S.a.get("https://maps.googleapis.com/maps/api/directions/json?origin=".concat(e,"&destination=").concat(t,"&key=").concat(z)).then(function(e){return console.log("results: ",e),e.data})}function G(e){new google.maps.DirectionsService;var t=new google.maps.DirectionsRenderer,n={zoom:15,center:e},a=new google.maps.Map(document.getElementById("map"),n);t.setMap(a)}function q(e,t){}function V(e,t,n,a){var i=6371,s=J(n-e),r=J(a-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(J(e))*Math.cos(J(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=i*c;return l}function J(e){return e*(Math.PI/180)}var X={getPosition:R,getDirections:K,calcRoute:q,initMap:G,getDistanceFromLatLonInKm:V},H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"flex"},[n("input",{ref:"input",staticClass:"input-location el-input__inner",attrs:{id:"pac-input",type:"text",placeholder:"Enter a location"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}}})])])},Y=[],Q=(n("96cf"),n("3040"));new a["default"];function W(e,t){localStorage[e]=JSON.stringify(t)}function Z(e){var t=localStorage[e]||"null";return JSON.parse(t)}var ee,te={store:W,load:Z},ne={data:function(){return{filterBy:"",loc:{}}},mounted:function(){var e=Object(Q["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$gmapApiPromiseLazy();case 2:t=e.sent,n=this.$refs.input,new t.maps.places.Autocomplete(n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{search:function(){var e=this,t=new google.maps.Geocoder,n=this.$refs.input.value;return t.geocode({address:n},function(t,n){n===google.maps.GeocoderStatus.OK?(e.loc.lat=t[0].geometry.location.lat(),e.loc.lng=t[0].geometry.location.lng(),e.$store.commit("setPosition",e.loc),e.$store.dispatch({type:"loadParkings"})):alert("Geocode was not successful for the following reason: "+n)}),this.loc}}},ae=ne,ie=(n("ca95"),Object(u["a"])(ae,H,Y,!1,null,"785095a3",null)),se=ie.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"filter"},[n("div",{staticClass:"filter-by",on:{click:function(t){return t.stopPropagation(),e.toggleFilter(t)}}},[n("i",{staticClass:"fas fa-filter"}),e._v("Filter\n        "),n("p",{staticClass:"clear-filter-btn",on:{click:function(t){return t.stopPropagation(),e.clearFilter(t)}}},[e._v("clear")])]),e.isOpen?n("div",{staticClass:"filter-container"},[n("div",{staticClass:"filter-options flex column"},[n("p",[e._v("Distance in km:")]),n("el-slider",{attrs:{"show-input":""},model:{value:e.filterBy.distance,callback:function(t){e.$set(e.filterBy,"distance",t)},expression:"filterBy.distance"}}),n("el-checkbox",{model:{value:e.filterBy.isPaved,callback:function(t){e.$set(e.filterBy,"isPaved",t)},expression:"filterBy.isPaved"}},[e._v("paved")]),n("el-checkbox",{model:{value:e.filterBy.isForDisable,callback:function(t){e.$set(e.filterBy,"isForDisable",t)},expression:"filterBy.isForDisable"}},[e._v("for disabled")]),n("el-checkbox",{model:{value:e.filterBy.isCovered,callback:function(t){e.$set(e.filterBy,"isCovered",t)},expression:"filterBy.isCovered"}},[e._v("covered")]),n("el-checkbox",{model:{value:e.filterBy.isAvailable,callback:function(t){e.$set(e.filterBy,"isAvailable",t)},expression:"filterBy.isAvailable"}},[e._v("available")]),n("el-button",{attrs:{type:"success"},on:{click:e.filter}},[e._v("Done")])],1)]):e._e()])},oe=[],ce={data:function(){return{filterBy:{isPaved:!1,isForDisable:!1,isCovered:!1,distance:100,isAvailable:!1},isOpen:!1}},methods:{filter:function(){console.log("filtering..."),this.$store.commit({type:"updateFilter",filterBy:this.filterBy}),console.log("filter updated!"),this.isOpen=!1},toggleFilter:function(){this.isOpen=!this.isOpen},clearFilter:function(){this.filterBy.isPaved=!1,this.filterBy.isForDisable=!1,this.filterBy.isCovered=!1,this.filterBy.distance=100,this.filterBy.isAvailable=!1}}},le=ce,ue=(n("bb77"),Object(u["a"])(le,re,oe,!1,null,"3daafa96",null)),de=ue.exports,pe={data:function(){return{pos:null,iconBase:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",isMap:!1}},props:{parkings:Array},methods:{getSymbol:function(e){return e.occupiedUntil<Date.now()?"http://maps.google.com/mapfiles/ms/icons/green-dot.png":""},getMyPos:function(){return X.getPosition().then(function(e){var t=e.coords.latitude,n=e.coords.longitude;return{lat:t,lng:n}})},getDistanceFromLatLonInKm:function(e,t,n,a){var i=6371,s=this.deg2rad(n-e),r=this.deg2rad(a-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=i*c;return l},deg2rad:function(e){return e*(Math.PI/180)},getDistanceByKilometer:function(){var e=this,t=this.parkings.map(function(t){return t.location.distance=e.getDistanceFromLatLonInKm(e.pos.lat,e.pos.lng,t.location.lat,t.location.lng).toFixed(1),t});return t.sort(function(e,t){return e.location.distance-t.location.distance}),t}},created:function(){var e=this;this.getMyPos().then(function(t){e.pos=t,e.getDistanceByKilometer()})},computed:{sortParkings:function(){return this.getDistanceByKilometer()}},components:{ParkingPreview:N,ParkingFilter:se,FilterBy:de}},ge=pe,fe=(n("60d7"),Object(u["a"])(ge,M,O,!1,null,"2b0250e9",null)),me=fe.exports,he={data:function(){return{filter:""}},created:function(){this.$store.dispatch({type:"loadParkings"})},computed:{parkings:function(){return this.$store.getters.parkingToDisplay}},components:{ParkingList:me}},ve=he,ke=(n("17f2"),Object(u["a"])(ve,D,U,!1,null,null,null)),be=ke.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.parkingDetail?n("section",[n("div",{staticClass:"section-details flex"},[n("el-card",{staticClass:"box-card"},[n("h5",{staticClass:"address"},[e._v(e._s(e.parkingDetail.parking.address))]),n("img",{staticClass:"parking-details-image image",attrs:{src:e.parkingDetail.parking.imageURL}}),n("div",{staticStyle:{padding:"25px"}},[n("div",{staticClass:"parking-details column"},[n("h5",{staticClass:"to-know"},[e._v("things you should know")]),n("p",[e._v("âª "+e._s(e.parkingDetail.parking.price))]),n("p",[e._v(e._s(e.distance)+" ")]),n("p",[e._v(e._s(e.parkingDetail.parking.description))]),n("div",[e._v("\n            "+e._s(e.parkingDetail.parking.amenities.isCovered)+"\n            "+e._s(e.parkingDetail.parking.amenities.isCovered)+"\n            "+e._s(e.parkingDetail.parking.amenities.isCovered)+"\n        ")])]),n("div",{staticClass:"about-owner flex column space-between"},[n("h5",[e._v("About owner")]),n("p",[e._v(e._s(e.parkingDetail.owner.firstName)+" "+e._s(e.parkingDetail.owner.lastName))]),n("p",[e._v(e._s(e.parkingDetail.owner.eMail))]),n("div",[n("el-button",{staticClass:"btn-reserve",attrs:{type:"success",disabled:e.isOccupied},on:{click:function(t){e.$router.push("/reserve/"+e.parkingDetail.parking._id)}}},[e._v("Reserve Now!")])],1)])])]),n("GmapMap",{staticStyle:{flex:"1",height:"85vh"},attrs:{center:e.parkingDetail.parking.location,zoom:16,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parkingDetail.parking.location,clickable:!0,draggable:!1},on:{click:function(t){e.$router.push("/reserve")}}})],1)],1)]):e._e()},_e=[],we=(n("ac6a"),n("9393")),je=n("a322"),Pe="/parking";function xe(e){var t=e.lat,n=e.lng;return S.a.get(Pe+"?lat=".concat(t,"&lng=").concat(n)).then(function(e){return e.data})}function Ce(e){return S.a.get("".concat(Pe,"/").concat(e)).then(function(e){return e.data}).then(function(e){return e.parking.location.lat=+e.parking.location.lat,e.parking.location.lng=+e.parking.location.lng,e})}function Ie(e){return console.log("25-serice",e),S.a.post(Pe+"/add",e)}function $e(e){return console.log("parking reserved: ",e),S.a.put("".concat(Pe,"/reserve/").concat(e.parkingId),e).then(function(e){return console.log("parking service res: ",e),console.log("parking service res data: ",e.data),e.data})}function De(e){return console.log("front end service parking: ",e),S.a.put("".concat(Pe,"/stop"),e).then(function(e){return e.data}).then(function(e){return console.log("data: ",e),e})}var Ue=(ee={query:xe,getById:Ce,reserveParking:$e,stopParking:De},Object(je["a"])(ee,"reserveParking",$e),Object(je["a"])(ee,"addParking",Ie),ee),Me={data:function(){return{parkingDetail:null,lat:0,lng:0,markers:[],distance:0}},methods:{loadParkingId:function(){var e=this,t=this.$route.params.id;return console.log("parkingId",t),Ue.getById(t).then(function(t){console.log("res",t),e.parkingDetail=t,console.log("parking detail:",e.parkingDetail)})},getDistanceFromLatLonInKm:function(e,t,n,a){var i=6371,s=this.deg2rad(n-e),r=this.deg2rad(a-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(n))*Math.sin(r/2)*Math.sin(r/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=i*c;return l},deg2rad:function(e){return e*(Math.PI/180)}},created:function(){var e=Object(Q["a"])(regeneratorRuntime.mark(function e(){var t,n,a,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.loadParkingId(),n=X.getPosition().then(function(e){var t=e.coords.latitude,n=e.coords.longitude;return{lat:t,lng:n}}),e.next=4,Promise.all([t,n]);case 4:a=e.sent,i=Object(we["a"])(a,2),i[0],s=i[1],this.distance=this.getDistanceFromLatLonInKm(this.parkingDetail.parking.location.lat,this.parkingDetail.parking.location.lng,s.lat,s.lng);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{isOccupied:function(){return this.parkingDetail.parking.occupiedUntil>Date.now()}}},Oe=Me,Le=(n("ce50"),Object(u["a"])(Oe,ye,_e,!1,null,"30ba3e8e",null)),Ee=Le.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"reserve-parking"},[n("h2",[e._v(e._s(e.parking.address))]),n("GmapMap",{staticStyle:{height:"300px"},attrs:{center:e.parking.location,zoom:17,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parking.location,clickable:!0,draggable:!0},on:{click:function(t){e.center=e.m.position}}})],1),n("div",{staticClass:"reserve-details"},[n("p",[e._v("How many hours?")]),n("form",{attrs:{submit:"setParkingDuration"}},[n("el-input-number",{attrs:{min:1,max:10},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),n("p",[e._v("Total Price: âª "+e._s(e.cost))]),n("el-button",{attrs:{type:"success"},on:{click:function(t){e.reserveParking(e.parking)}}},[e._v("Reserve Parking!")])],1)])],1)},Be=[],Ae={data:function(){return{hours:1,parking:{location:{lat:0,lng:0}}}},created:function(){this.loadParking()},methods:{reserveParking:function(e){var t=this;if(""===this.user._id||!1===this.user._id)this.$router.push("/login");else{var n=Date.now()+60*this.hours*60*1e3;console.log("occupied until: ",n),e.reserverId=this.user._id,e._id=this.parking._id,e.occupiedUntil=n,console.log("parking before reservation: ",e),this.$store.dispatch({type:"reserveParking",parking:e}).then(function(n){t.showConfirmation(),console.log("parking has been reserved!"),t.$router.push("/navigate/".concat(e._id))})}},loadParking:function(){var e=this,t=this.$route.params.id;console.log("this route URL: ",this.$route),Ue.getById(t).then(function(t){e.parking=t.parking})},showConfirmation:function(){this.$message({message:"Congratulations "+this.user.firstName+", your parking at "+this.parking.address+" is waiting for you!",type:"success"})}},computed:{cost:function(){return this.hours*this.parking.price},user:function(){return this.$store.getters.loggedInUser}}},Ne=Ae,Fe=(n("81de"),Object(u["a"])(Ne,Te,Be,!1,null,null,null)),Se=Fe.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Reserved Parkings"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.reserved,expression:"reserved"}],staticClass:"reserved-parkings"},[e.reservedParkings.length>0?n("h2",[e._v("My Reserved Parkings:")]):e._e(),n("ul",e._l(e.reservedParkings,function(t){return n("my-parking-preview",{key:t._id,attrs:{parking:t,owned:!1},on:{"stop-parking":e.stopParking}})}))])]),n("el-tab-pane",{attrs:{label:"Owned Parkings"}},[n("div",{staticClass:"owned-parkings"},[n("h2",[e._v("My Owned Parkings")]),n("ul",e._l(e.ownedParkings,function(t){return n("my-parking-preview",{key:t._id,attrs:{parking:t,owned:!0},on:{"stop-parking":e.stopParking}})}))])]),n("el-tab-pane",{attrs:{label:"Profile"}},[n("div",{staticClass:"my-details"},[n("h2",[e._v("My Details")]),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"profile-details flex space-around"},[n("div",{staticClass:"profile-image"}),n("div",{staticClass:"profile-details flex column"},[n("h2",[e._v(e._s(e.user.firstName)+" "+e._s(e.user.lastName))]),n("p",[e._v(e._s(e.user.eMail))])])])])],1)])],1)],1):e._e()},Re=[],Ke="/user";function Ge(e){return S.a.get("".concat(Ke,"/").concat(e)).then(function(e){return console.log("res: ",e),e.data})}function qe(e){return console.log("emailbimail: ",e),S.a.post("".concat(Ke,"/checkLogin"),{userInfo:e}).then(function(e){return console.log("res.data dat resssssssss:",e.data),e.data})}function Ve(e){return console.log("new user: ",e),S.a.post("".concat(Ke,"/add"),e).then(function(e){return console.log("res data user: ",e.data),e.data})}var Je={getUserById:Ge,login:qe,addUser:Ve},Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("router-link",{staticClass:"no-underline",attrs:{to:"/parking/"+e.parking._id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"flex space-between"},[n("div",{staticClass:"image-container"},[n("img",{attrs:{src:e.parking.imageURL}}),n("div",{staticClass:"google-maps",class:{"hidden-map":!e.mapView}},[n("GmapMap",{staticStyle:{width:"100%",height:"100%"},attrs:{center:e.parking.location,zoom:15,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.parking.location,clickable:!0,draggable:!1},on:{click:function(t){t.preventDefault(),e.center=e.m.position}}})],1)],1),n("div",{staticClass:"toggle-map-btn",on:{click:function(t){t.preventDefault(),e.mapView=!e.mapView}}})]),n("div",{staticClass:"details-container parking-properties flex column space-between"},[n("ul",{staticClass:"parking-details"},[n("li",[n("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(e.parking.address))]),n("li",[n("i",{staticClass:"fas fa-dollar-sign"}),e._v("  âª "+e._s(e.parking.price)+" per hour")]),e.owned?n("li",[e._v(e._s(e.parking.reserverId?"Occupied":"Available for rent"))]):n("li",[n("i",{staticClass:"far fa-clock"}),e._v("  ends "+e._s(e.convertTimestamp(e.parking.occupiedUntil)))])]),e.owned?e._e():n("el-button",{attrs:{type:"success"},on:{click:function(t){t.preventDefault(),e.stopParking(e.parking)}}},[e._v("Stop Parking")])],1)])])],1)],1)},He=[],Ye=n("c1df"),Qe=n.n(Ye),We={name:"my-parking-preview",props:["parking","owned"],data:function(){return{mapView:!1}},methods:{convertTimestamp:function(e){return Qe()(e).fromNow()},stopParking:function(){this.$emit("stop-parking",this.parking)}},created:function(){}},Ze=We,et=(n("6bde"),Object(u["a"])(Ze,Xe,He,!1,null,"91496bd4",null)),tt=et.exports,nt={data:function(){return{user:null,reservedParkings:null,ownedParkings:null}},methods:{loadParkingsActivity:function(){var e=this;console.log("route params userId: ",this.$route.params.userId);var t=this.$route.params.userId;console.log("userID: ",t),Je.getUserById(t).then(function(t){e.user=t.user,e.reservedParkings=t.reservedParkings,e.ownedParkings=t.ownedParkings})},convertTimestamp:function(e){return Qe()(e).fromNow()},stopParking:function(e){var t=this;return this.$store.dispatch({type:"stopParking",parking:e}).then(function(){t.reservedParkings=t.reservedParkings.filter(function(e){return e._id!==e._id})})}},created:function(){this.loadParkingsActivity()},computed:{reserved:function(){return console.log("my reserved parkings: ",this.reservedParkings),this.reservedParkings.length>0}},components:{myParkingPreview:tt}},at=nt,it=(n("863a"),Object(u["a"])(at,ze,Re,!1,null,"5fca77fb",null)),st=it.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Login"}},[n("div",{staticClass:"login"},[n("h3",[e._v("Login to your account")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("div",{staticClass:"login-container flex column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"}],attrs:{type:"text",placeholder:"Insert your email"},domProps:{value:e.userInfo.email},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"email",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.password,expression:"userInfo.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.userInfo.password},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"password",t.target.value)}}}),n("el-button",{attrs:{type:"success"},on:{click:e.login}},[e._v("Login")])],1)]),n("p",[e._v(e._s(e.message))])])]),n("el-tab-pane",{attrs:{label:"Signup"}},[n("div",{staticClass:"signup"},[n("h3",[e._v("Create a new account")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("div",{staticClass:"signup-container flex column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.firstName,expression:"newUser.firstName"}],attrs:{type:"text",placeholder:"First Name:"},domProps:{value:e.newUser.firstName},on:{input:function(t){t.target.composing||e.$set(e.newUser,"firstName",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.lastName,expression:"newUser.lastName"}],attrs:{type:"text",placeholder:"Last Name:"},domProps:{value:e.newUser.lastName},on:{input:function(t){t.target.composing||e.$set(e.newUser,"lastName",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{type:"email",placeholder:"email:"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{type:"password",placeholder:"Password:"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),n("el-button",{attrs:{type:"success"},on:{click:e.signup}},[e._v("Sign me Up!")])],1)]),n("p",[e._v(e._s(e.message))])])])],1)],1)},ot=[],ct={data:function(){return{message:"",userInfo:{email:"",password:""},newUser:{firstName:"",lastName:"",email:"",password:""}}},methods:{login:function(){var e=this;console.log("4-00000",this.$store.state.UserModule.aboutUser),this.userInfo.email&&this.userInfo.password?this.$store.dispatch({type:"login",userInfo:this.userInfo}).then(function(t){console.log("85-login:",t),e.$router.go(-1)}).catch(function(t){return e.message="no such user"}):this.message="please enter valid user"},signup:function(){var e=this;console.log("user signed up"),this.newUser.firstName&&this.newUser.lastName&&this.newUser.email&&this.newUser.password?this.$store.dispatch({type:"signup",newUser:this.newUser}).then(function(t){e.$router.push("/parking")}).catch(function(e){console.log("error creating new user: ",e)}):this.message="Please insert all details"}},created:function(){}},lt=ct,ut=(n("af7a"),Object(u["a"])(lt,rt,ot,!1,null,"09fb6c38",null)),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"parking-section"},[n("form",{staticClass:"add-parking-form",on:{submit:function(t){return t.preventDefault(),e.addParking(t)}}},[n("h3",[e._v(" Add New Parking ")]),e.isAddParking?n("div",{staticClass:"add-parking"},[n("div",{staticClass:"add-margin"},[n("input",{ref:"placeAutocomplete",staticClass:"el-input__inner",attrs:{placeholder:"Please input Adress",type:"text"}})]),n("div",[n("p",[e._v("Price:")]),n("el-input-number",{attrs:{min:1},model:{value:e.parkingToEdit.price,callback:function(t){e.$set(e.parkingToEdit,"price",t)},expression:"parkingToEdit.price"}})],1),n("div",{staticClass:"add-margin"},[n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isCovered,callback:function(t){e.$set(e.parkingToEdit.amenities,"isCovered",t)},expression:"parkingToEdit.amenities.isCovered"}},[e._v("IsCovered")]),n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isPaved,callback:function(t){e.$set(e.parkingToEdit.amenities,"isPaved",t)},expression:"parkingToEdit.amenities.isPaved"}},[e._v("isPaved")]),n("el-checkbox",{model:{value:e.parkingToEdit.amenities.isForDisable,callback:function(t){e.$set(e.parkingToEdit.amenities,"isForDisable",t)},expression:"parkingToEdit.amenities.isForDisable"}},[e._v("isForDisable")])],1),n("div",{staticClass:"flex align-center"},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Please input Description"},model:{value:e.parkingToEdit.description,callback:function(t){e.$set(e.parkingToEdit,"description",t)},expression:"parkingToEdit.description"}})],1),n("div",[n("input",{staticClass:"load-img-btn",attrs:{type:"file",id:"LoadImageBtn",name:"img"},on:{change:function(t){e.loadImg(t.target,t)}}}),n("label",{staticClass:"load-img-lbl el-button el-button--primary el-button--small",attrs:{for:"LoadImageBtn"}},[e._v(e._s(e.fileLabelTxt))])]),n("el-button",{attrs:{type:"success"},on:{click:e.addParking}},[e._v("Confirm New Parking")])],1):e._e()])])},gt=[],ft=(n("28a5"),"parker1");"https://api.cloudinary.com/v1_1/".concat(ft,"/image/upload");function mt(e,t){return ht.apply(this,arguments)}function ht(){return ht=Object(Q["a"])(regeneratorRuntime.mark(function e(t,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return console.log("uploadedImg",e),console.log("uploadedImg",e.url),e},e.next=3,vt(t,a);case 3:return i=e.sent,console.log("res=",i.url),e.abrupt("return",i.url);case 6:case"end":return e.stop()}},e,this)})),ht.apply(this,arguments)}function vt(e,t){var n="https://api.cloudinary.com/v1_1/".concat(ft,"/image/upload"),a=new FormData;return a.append("file",e.files[0]),a.append("upload_preset","ymaycqwv"),fetch(n,{method:"POST",body:a}).then(function(e){return e.json()}).then(t).catch(function(e){console.error(e)})}var kt={uploadImg:mt},bt={props:["parking"],name:"ParkingEdit",data:function(){return{parkingToAdd:{location:{lat:"0",lng:"0"},address:"",occupiedUntil:"0",reserverId:"",ownerId:"5b583081f6d632e56ebd6a45",price:"0",amenities:{isCovered:!1,isPaved:!0,isForDisable:!1},description:"",createdAt:0,imageURL:"http://res.cloudinary.com/parker1/image/upload/v1533190733/e8iuj1et9h7mwylwhe5x.jpg"},isAddParking:!0,fileLabelTxt:"Load Image"}},computed:{parkingToEdit:function(){return this.parkingToAdd},user:function(){return this.$store.getters.loggedInUser}},mounted:function(){var e=this;this.$gmapApiPromiseLazy().then(function(t){var n=new t.maps.places.Autocomplete(e.$refs.placeAutocomplete);n.addListener("place_changed",function(t){var a=n.getPlace();console.log({place:a}),e.parkingToAdd.location.lat=a.geometry.location.lat(),e.parkingToAdd.location.lng=a.geometry.location.lng(),console.log(e.parkingToAdd.location.lat),console.log(e.parkingToAdd.location.lng),e.parkingToAdd.address=a.formatted_address})})},methods:{addParking:function(){var e=this;if(""===this.user._id||!1===this.user._id)this.$router.push("/login");else if(this.parkingToAdd.address){var t=this.parkingToEdit;this.isAddParking&&(t.ownerId=this.user._id,console.log("ownerID:",t.ownerId),this.$store.dispatch({type:"addParking",newParking:t}).then(function(t){console.log("new parking added: ",t),console.log("res._id: ",t._id),e.$router.push("/parking/".concat(t._id))}).catch(function(t){e.failedToCreate()}))}else console.log("Address is empty, please add address!"),this.addressIsEmpty()},addressIsEmpty:function(){var e=this;this.$alert("The address is empty, please add address","Alert",{confirmButtonText:"OK",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})},failedToCreate:function(){var e=this;this.$alert("Failed to save parking, please try later","Alert",{confirmButtonText:"OK",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})},loadImg:function(e,t){var n=this;kt.uploadImg(e,t).then(function(e){n.parkingToEdit.imageURL=e,console.log(" this.parkingToEdit.imageURL",n.parkingToEdit.imageURL)}),this.fileLabelTxt=t.target.value.split("\\").pop(),this.fileLabelTxt||(this.fileLabelTxt="Load Image")}}},yt=bt,_t=(n("d538"),Object(u["a"])(yt,pt,gt,!1,null,"d31ac006",null)),wt=_t.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("GmapMap",{ref:"navigateMap",staticStyle:{height:"300px"},attrs:{center:e.parking.location,zoom:11,"map-type-id":"terrain"}}),a("div",{staticClass:"navigation flex space-between"},[a("img",{attrs:{src:n("cc8b")},on:{click:e.navigate}}),a("el-button",{attrs:{type:"success"},on:{click:e.toggleDirections}},[e._v(e._s(e.directions.show?"Hide":"Show")+" Directions")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.directions.show,expression:"directions.show"}],ref:"panel",staticClass:"panel"})],1)},Pt=[],xt=n("755e"),Ct={data:function(){return{userLocation:{location:{lat:0,lng:0}},parking:{location:{lat:0,lng:0}},directions:{distance:"",time:"",show:!1,url:""},icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}},mounted:function(){var e=Object(Q["a"])(regeneratorRuntime.mark(function e(){var t,n,a,i,s,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.loadParking(),this.getUserLocation()]);case 2:return e.next=4,this.$gmapApiPromiseLazy();case 4:t=e.sent,console.log(t),n=new this.google.maps.DirectionsService,a=new this.google.maps.DirectionsRenderer,i=new t.maps.LatLng(this.userLocation.location.lat,this.userLocation.location.lng),{zoom:15,center:i},s=this.$refs.navigateMap.$mapObject,console.log("map ref: ",this.$refs.navigateMap),r=this.$refs.panel,a.setMap(s),a.setPanel(r),o={origin:this.userLocation.location,destination:this.parking.location,travelMode:"DRIVING"},n.route(o,function(e,t){"OK"==t&&a.setDirections(e)});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{loadParking:function(){var e=this,t=this.$route.params.id;return Ue.getById(t).then(function(t){e.parking=t.parking})},getUserLocation:function(){var e=this;return X.getPosition().then(function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e.userLocation.location=n}).catch(function(e){console.log("Something went wrong: ",e)})},initMap:function(e){console.log("this maps: ",this.google.maps);new this.google.maps.DirectionsService;var t=new this.google.maps.DirectionsRenderer,n={zoom:15,center:e},a=new google.maps.Map(document.getElementById("map"),n);t.setMap(a)},navigate:function(){var e=+this.parking.location.lat,t=+this.parking.location.lng;console.log("lat: ",e),console.log("lng: ",t),console.log("parking location: ",this.parking.location),window.open("https://waze.com/ul?ll=".concat(e,",").concat(t,"&navigate=yes"),"_blank")},toggleDirections:function(){this.directions.show=!this.directions.show}},computed:{user:function(){return this.$store.getters.loggedInUser},google:xt["gmapApi"]}},It=Ct,$t=(n("e391"),Object(u["a"])(It,jt,Pt,!1,null,"1f6e2ee5",null)),Dt=$t.exports;a["default"].use(v["a"]);var Ut=new v["a"]({routes:[{path:"/",name:"home",component:j},{path:"/about",name:"about",component:$},{path:"/parking",name:"parking-page",component:be},{path:"/parking/add",name:"parking-add",component:wt},{path:"/parking/:id",name:"parking-details",component:Ee},{path:"/reserve/:id",name:"reserve-parking",component:Se},{path:"/user/:userId",name:"my-parkings",component:st},{path:"/login",name:"login",component:dt},{path:"/navigate/:id",name:"navigate",component:Dt}]}),Mt=n("2f62"),Ot=(n("20d6"),{state:{parkings:[],position:{lat:0,lng:0},component:"ParkingFilter",latLng:{},isSearch:!1,filterBy:{distance:100,isPaved:"",isCovered:"",isForDisable:""}},getters:{parkingToDisplay:function(e){return e.parkings.filter(function(t){return!e.filterBy.isPaved||t.amenities.isPaved}).filter(function(t){return!e.filterBy.isCovered||t.amenities.isCovered}).filter(function(t){return!e.filterBy.isForDisable||t.amenities.isForDisable}).filter(function(t){var n=X.getDistanceFromLatLonInKm(e.position.lat,e.position.lng,t.location.lat,t.location.lng);return t.distance=n,n<e.filterBy.distance}).sort(function(e,t){return e.distance>t.distance})},componentToShow:function(e){return e.component},p:function(e){return e.latLng},position:function(e){return e.position},search:function(e){return e.isSearch}},mutations:{setParkings:function(e,t){var n=t.parkings;e.parkings=n},reserveParking:function(e,t){var n=t.parking;console.log("parking in mutation: ",n),console.log("state before splicing: ",e);var a=e.parkings.findIndex(function(e){return e._id===n._id});console.log("idx: ",a),console.log("state after splicing: ",e),e.parkings.splice(a,1,n)},stopParking:function(e,t){var n=t.parking;console.log("commit state: ",e);var a=e.parkings.findIndex(function(e){return e._id===n._id});console.log("idx: ",a),e.parkings.splice(a,1,n),console.log("state after stop parking: ",e)},addParking:function(e,t){var n=t.newParking;return e.parkings.unshift(n),console.log("parkings form store:",e.parkings),n},setPosition:function(e,t){e.position.lat=t.lat,e.position.lng=t.lng,e.latLng.lat=t.lat,e.latLng.lng=t.lng,console.log("state",e.latLng)},updateFilter:function(e,t){var n=t.filterBy;console.log("filter: ",n),e.filterBy=n}},actions:{loadParkings:function(e){return Ue.query(e.getters.position).then(function(t){return e.commit({type:"setParkings",parkings:t}),t})},reserveParking:function(e,t){var n=t.parking;return console.log("parking to reserve",n),Ue.reserveParking(n).then(function(t){e.commit({type:"reserveParking",parking:t})})},stopParking:function(e,t){var n=t.parking;return console.log("context",e),console.log("parking",n),console.log("store parking before stopping: ",n),n.occupiedUntil=0,n.reserverId="",console.log("store parking after init: ",n),Ue.stopParking(n).then(function(t){e.commit({type:"stopParking",parking:t})})},addParking:function(e,t){var n=t.newParking;return console.log("actions:",n),Ue.addParking(n).then(function(t){return console.log("res in store: ",t),e.commit({type:"addParking",newParking:t.data}),t.data})}}}),Lt={state:{user:{_id:"",firstName:"",lastName:"",eMail:"",password:""},aboutUser:""},getters:{isLoggedIn:function(e){return!!e.user._id},loggedInUser:function(e){return e.user}},mutations:{setUser:function(e,t){var n=t.user;e.user=n},logoutUser:function(e){e.user={_id:"",firstName:"",lastName:"",eMail:""},console.log("state logged in user: ",e.user)},addUser:function(e,t){var n=t.newUser;e.user=n,console.log("new user logged in: ",e.user)}},actions:{login:function(e,t){var n=t.userInfo;Je.login(n).then(function(t){return t._id?(console.log("this user logged in successfullyyyyyyyyyyyy",t),e.commit({type:"setUser",user:t}),te.store("loggedInUser",t),Promise.resolve(t)):Promise.reject(function(e){return e})}).catch(function(e){return console.log("wrong login details"),Promise.reject()})},signup:function(e,t){var n=t.newUser;Je.addUser(n).then(function(t){console.log("new user before committing:",t),e.commit({type:"addUser",newUser:t})})},logout:function(e){e.commit({type:"logoutUser"}),console.log("user logged out successfully")}}};a["default"].use(Mt["a"]);var Et=new Mt["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{ParkingModule:Ot,UserModule:Lt}}),Tt=n("5c96"),Bt=n.n(Tt),At=(n("0fae"),n("9483"));Object(At["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("3ed1");a["default"].use(xt,{load:{key:"AIzaSyC6AifY9XewU3b2wEp0Dr7XKyOjSS1oebQ",libraries:"places"}}),a["default"].config.productionTip=!1,a["default"].use(Bt.a),new a["default"]({router:Ut,store:Et,render:function(e){return e(h)},created:function(){var e=this,t=te.load("loggedInUser");t&&this.$store.commit({type:"setUser",user:t}),X.getPosition().then(function(t){var n=t.coords;e.$store.commit({type:"setPosition",lat:n.latitude,lng:n.longitude})})}}).$mount("#app")},"572b":function(e,t,n){"use strict";var a=n("f4a0"),i=n.n(a);i.a},"5c0b":function(e,t,n){"use strict";var a=n("106f"),i=n.n(a);i.a},"60d7":function(e,t,n){"use strict";var a=n("9e70"),i=n.n(a);i.a},"6bde":function(e,t,n){"use strict";var a=n("3242"),i=n.n(a);i.a},"701c":function(e,t,n){},"72f0":function(e,t,n){},"81de":function(e,t,n){"use strict";var a=n("72f0"),i=n.n(a);i.a},"863a":function(e,t,n){"use strict";var a=n("f250"),i=n.n(a);i.a},"9e70":function(e,t,n){},ab11:function(e,t,n){},af7a:function(e,t,n){"use strict";var a=n("b81e"),i=n.n(a);i.a},b030:function(e,t,n){},b4af:function(e,t,n){},b81e:function(e,t,n){},b898:function(e,t,n){"use strict";var a=n("d2c1"),i=n.n(a);i.a},bb77:function(e,t,n){"use strict";var a=n("701c"),i=n.n(a);i.a},ca95:function(e,t,n){"use strict";var a=n("ab11"),i=n.n(a);i.a},cc8b:function(e,t,n){e.exports=n.p+"img/waze.b7cdbe43.png"},ce50:function(e,t,n){"use strict";var a=n("3a7b"),i=n.n(a);i.a},d2c1:function(e,t,n){},d538:function(e,t,n){"use strict";var a=n("b4af"),i=n.n(a);i.a},d619:function(e,t,n){"use strict";var a=n("fbc7"),i=n.n(a);i.a},e391:function(e,t,n){"use strict";var a=n("e833"),i=n.n(a);i.a},e833:function(e,t,n){},f250:function(e,t,n){},f4a0:function(e,t,n){},fbc7:function(e,t,n){}});
//# sourceMappingURL=app.82a3f66b.js.map